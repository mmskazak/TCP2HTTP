package tcp2http

// Stop корректно останавливает TCP-сервер, закрывая слушатель и ожидая завершения всех горутин.
func (t *TCPForwarder) Stop() error {
	// Отменяем контекст, чтобы остановить все активные операции.
	t.cancel()
	// Закрываем TCP-слушатель.
	if t.ln != nil {
		t.ln.Close()
	}
	// Ожидаем завершения всех горутин.
	t.wg.Wait()
	return nil
}
